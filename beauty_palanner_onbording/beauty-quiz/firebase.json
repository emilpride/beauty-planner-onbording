{
  "hosting": [
    {
      "site": "quiz-beautymirror-app",
      "public": "out",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    "headers": [
      {
        "source": "**/*.html",
        "headers": [
          { "key": "Cache-Control", "value": "no-store, max-age=0" }
        ]
      },
      {
        "source": "**/*.@(js|css)",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }
        ]
      },
      {
        "source": "**/*.@(png|jpg|jpeg|gif|svg|webp|avif|ico|woff|woff2|ttf|eot|mp3)",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }
        ]
      }
    ],
      "rewrites": [
      {
        "source": "/api/generate-avatar",
        "function": {
          "functionId": "generateAvatar",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/enrich-geo",
        "function": {
          "functionId": "enrichGeo",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/save-onboarding-session",
        "function": {
          "functionId": "saveOnboardingSession",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/pay",
        "function": {
          "functionId": "processPayment",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/analyze",
        "function": {
          "functionId": "analyzeUserData",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/stripe-webhook",
        "function": {
          "functionId": "stripeWebhook",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/upload-photo",
        "function": {
          "functionId": "uploadPhoto",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/skin-analysis",
        "function": {
          "functionId": "skinAnalysis",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/skin-analysis/upload",
        "function": {
          "functionId": "skinAnalysisUpload",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/finalize",
        "function": {
          "functionId": "finalizeOnboarding",
          "region": "us-central1"
        }
      },
      {
          "source": "**",
          "destination": "/index.html"
        }
      ]
    },
    {
      "site": "skin-beautymirror-app",
      "public": "skin-app/out",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "headers": [
        { "source": "**/*.html", "headers": [{ "key": "Cache-Control", "value": "no-store, max-age=0" }] },
        { "source": "**/*.@(js|css)", "headers": [{ "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }] },
        { "source": "**/*.@(png|jpg|jpeg|gif|svg|webp|avif|ico|woff|woff2|ttf|eot|mp3)", "headers": [{ "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }] }
      ],
      "rewrites": [
        { "source": "/api/skin-analysis", "function": { "functionId": "skinAnalysis", "region": "us-central1" } },
        { "source": "/api/skin-analysis/upload", "function": { "functionId": "skinAnalysisUpload", "region": "us-central1" } },
        { "source": "**", "destination": "/index.html" }
      ]
    }
  ],
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "functions": [
    {
      "source": "functions",
      "runtime": "nodejs20",
      "environmentVariables": {
        "AVATAR_GEN_PROVIDER": "gemini",
        "AVATAR_GEN_URL": "https://avatar-gen-service-587635367697.us-central1.run.app/generate"
      }
    },
    {
      "source": "functions-min",
      "codebase": "minimal",
      "runtime": "nodejs20"
    }
  ]
}